---
interface Props {
  strings: string[];
  className?: string;
}

const { strings, className = "" } = Astro.props;
const stringsJson = JSON.stringify(strings);
---

<span class={`typed-text ${className}`} data-strings={stringsJson}></span>

<script>
  import Typed from 'typed.js';

  function initTyped() {
    const prefersReducedMotion = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    const typedElements = document.querySelectorAll('.typed-text');

    typedElements.forEach(element => {
      const strings = JSON.parse(element.getAttribute('data-strings') || '[]');

      // Si prefiere movimiento reducido, mostrar texto est√°tico
      if (prefersReducedMotion) {
        (element as HTMLElement).textContent = strings[0] || '';
        return;
      }

      new Typed(element, {
        strings: strings,
        typeSpeed: 50,
        backSpeed: 30,
        backDelay: 2000,
        loop: true,
        showCursor: true,
        cursorChar: '|',
      });
    });
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initTyped);
  } else {
    initTyped();
  }
</script>
