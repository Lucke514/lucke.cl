---
import Layout from "src/layouts/Layout.astro";

// Definición de tipos para TypeScript
interface Project {
    title: string;
    description: string;
    technologies: string[];
    images: {
        src: string;
        alt: string;
    }[];
    links: {
        github?: string;
        live?: string;
    };
    featured: boolean;
    backendProject?: boolean;
}

// Array de proyectos
const projects: Project[] = [
    {
        title: "Organizer",
        description: "Sistema de gestión empresarial multimódulo desarrollado como proyecto freelance. Incluye módulo de Inventario finalizado que permite registrar ingresos/salidas de artículos, realizar traspasos entre almacenes y visualizar movimientos segmentados. El sistema muestra alertas de stock bajo en el dashboard principal para mejorar la toma de decisiones.",
        technologies: ["Next.js", "Prisma", "MySQL", "TailwindCSS"],
        images: [
            {
                src: "/img/projects/organizer-1.webp",
                alt: "Dashboard principal de Organizer"
            },
            {
                src: "/img/projects/organizer-2.webp",
                alt: "Módulo de inventario"
            }
        ],
        links: {
            live: "https://organizer.cl",
        },
        featured: true
    },
    {
        title: "Portal de empleo Banen.cl",
        description: "Aplicación web desarrollada para la empresa Gestpyme Spa, cuyo objetivo es facilitar la búsqueda de empleo. Se emplean tecnologías como React, Node.js, TypeScript, JWT y TailwindCSS, entre otras.",
        technologies: ["React", "Node.js", "TypeScript", "JWT", "TailwindCSS"],
        images: [
            {
                src: "/img/projects/Banen-1.webp",
                alt: "Página principal del portal de empleo"
            },
            {
                src: "/img/projects/Banen-2.webp",
                alt: "Panel de administración"
            }
        ],
        links: {
            live: "https://banen.cl"
        },
        featured: true
    },
    {
        title: "Itury",
        description: "Una aplicación web desarrollada en el Hospital Provincial de Ovalle, cuyo objetivo es mejorar la gestión y entrega de medicamentos a los usuarios mediante un sistema de llamadas. Se integran APIs del mismo centro de salud, utilizando tecnologías como Node.js, EJS, Bootstrap y AJAX.",
        technologies: ["EJS", "Node.js", "MySQL", "BoostrapCSS", "JavaScript"],
        images: [
            {
                src: "/img/projects/Itury-1.webp",
                alt: "Login Itury"
            },
            {
                src: "/img/projects/Itury-2.webp",
                alt: "Vista de la aplicación Itury"
            }
        ],
        links: {
        },
        featured: false
    },
    {
        title: "My Bot",
        description: "Servicio de mensajería desarrollado en Node.js, que permite responder mensajes de WhatsApp de forma automática. Se emplean tecnologías como Whatsapp-Web.js, Express.js y la Api de OpenAI.",
        technologies: ["Node.js", "Express.js", "Whatsapp-Web.js", "OpenAI"],
        images: [
            {
                src: "/img/projects/MyBot-1.webp",
                alt: "Chat de WhatsApp"
            },
            {
                src: "/img/projects/MyBot-2.webp",
                alt: "Panel de administración"
            }
        ],
        links: {
            github: "https://www.github.com/lucke514/mybot.cl",
            live: "https://www.mybot.cl"
        },
        featured: false
    },
    {
        title: "Compress Images",
        description: "Aplicación web desarrollada en React, que permite comprimir imágenes de forma sencilla y rápida. Se emplean tecnologías como React y TailwindCSS.",
        technologies: ["React", "TailwindCSS"],
        images: [
            {
                src: "/img/projects/CompressImage-1.webp",
                alt: "Página principal de Compress Images"
            },
            {
                src: "/img/projects/CompressImage-2.webp",
                alt: "Comprimir imágenes"
            }
        ],
        links: {
            live: "https://compress-images.lucke.cl/"
        },
        featured: true
    },
    {
        title: "WhatsApp Api",
        description: "API desarrollada en Node.js, que permite enviar mensajes de WhatsApp de forma automática. Se emplean tecnologías como Express.js, Whatsapp-web.js, React y tailwindCSS.",
        technologies: ["Node.js", "Express.js", "Whatsapp-Web.js", "React", "TailwindCSS"],
        images: [
            {
                src: "/img/projects/Wsap-1.webp",
                alt: "Login de WhatsApp Api"
            },
            {
                src: "/img/projects/Wsap-2.webp",
                alt: "Panel de usuario"
            }
        ],
        links: {
            live: "https://www.wsap.cl"
        },
        featured: true
    }
];

// Array de proyectos backend
const backendProjects: Project[] = [
    {
        title: "API Organizer",
        description: "API RESTful desarrollada en NestJS para el sistema de gestión empresarial Organizer. Proporciona endpoints para gestionar módulos como Inventario, Ventas y Compras, permitiendo operaciones CRUD y consultas avanzadas. Implementa autenticación JWT y manejo de roles para asegurar el acceso a los recursos.",
        technologies: ["NestJS", "Prisma", "MySQL", "JWT", "TypeScript"],
        images: [],
        links: {
        },
        featured: true,
        backendProject: true
    },
    {
        title: "Microservicio de Notificaciones",
        description: "Servicio especializado en el envío de notificaciones por email y SMS. Desarrollado con arquitectura de microservicios, incluye cola de mensajes para garantizar la entrega y templates personalizables para diferentes tipos de notificaciones.",
        technologies: ["Node.js", "Express.js", "Redis", "Nodemailer", "Twilio"],
        images: [],
        links: {
        },
        featured: false,
        backendProject: true
    },
    {
        title: "Microservicio Tributario",
        description: "Microservicio desarrollado en NestJS para gestión tributaria empresarial, integrado con la API del SII (Servicio de Impuestos Internos) de Chile. Automatiza procesos de facturación electrónica, consulta de estados tributarios y generación de reportes. Implementa caché con Redis para optimizar consultas frecuentes y está desplegado en AWS con arquitectura escalable.",
        technologies: ["NestJS", "PostgreSQL", "Redis", "AWS", "SII API", "TypeScript"],
        images: [],
        links: {
        },
        featured: true,
        backendProject: true
    }
];

// Separar proyectos frontend y backend
const frontendProjects = projects.filter(project => !project.backendProject);
const allBackendProjects = [...backendProjects, ...projects.filter(project => project.backendProject)];
---

<Layout title="Proyectos | Lucas Gonzalez">
    <main class="max-w-5xl mx-auto px-4 py-12">
        <header class="space-y-4 mb-12">
            <h1 class="text-4xl font-bold text-center dark:text-white">
                Mis Proyectos
            </h1>
            <p class="text-center text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">
                Aquí encontrarás una selección de mis proyectos más destacados, 
                que demuestran mis habilidades en desarrollo web full stack.
            </p>
        </header>

        <!-- Proyectos Frontend -->
        <section class="mb-16">
            <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-8 text-center">
                Proyectos Frontend
            </h2>
            
            <div class="grid gap-12">
                { frontendProjects.map((project, index) => (
                    <article 
                        class={`relative group 
                            ${index % 2 === 0 ? 'lg:flex-row' : 'lg:flex-row-reverse'}
                            flex flex-col lg:flex-row gap-8 
                            p-6 rounded-2xl
                            bg-white dark:bg-gray-800/50 
                            shadow-lg hover:shadow-xl
                            transform transition duration-300 hover:-translate-y-1`}
                        data-aos={index % 2 === 0 ? "fade-right" : "fade-left"}
                    >
                        <figure class="lg:w-1/2 relative group">
                            <div class="relative aspect-video rounded-lg overflow-hidden">
                                {project.images.map((image, imgIndex) => (
                                    <div 
                                        class={`absolute inset-0 transition-opacity duration-500 ease-in-out
                                            ${imgIndex === 0 ? 'opacity-100' : 'opacity-0 group-hover:opacity-100'}`}
                                    >
                                        <img
                                            src={image.src}
                                            alt={image.alt}
                                            class="w-full h-full object-cover"
                                        />
                                    </div>
                                ))}
                            </div>
                        </figure>

                        <div class="lg:w-1/2 flex flex-col justify-center">
                            <header class="space-y-4">
                                <h3 class="text-2xl font-bold text-gray-900 dark:text-white">
                                    {project.title}
                                    {project.featured && (
                                        <span class="ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200">
                                            Destacado
                                        </span>
                                    )}
                                </h3>
                            </header>

                            <p class="text-gray-600 dark:text-gray-300">
                                {project.description}
                            </p>

                            <ul class="flex flex-wrap gap-2">
                                {project.technologies.map(tech => (
                                    <li class="px-3 py-1 text-sm rounded-full bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300">
                                        {tech}
                                    </li>
                                ))}
                            </ul>

                            <footer class="flex gap-4 pt-4">
                                {project.links.github && (
                                    <a
                                        href={project.links.github}
                                        target="_blank"
                                        rel="noopener noreferrer"
                                        class="inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-gray-900 dark:bg-gray-700 text-white hover:bg-gray-800 dark:hover:bg-gray-600 transition-colors"
                                    >
                                        <svg
                                            class="w-5 h-5"
                                            fill="currentColor"
                                            viewBox="0 0 24 24"
                                            aria-hidden="true"
                                        >
                                            <path
                                                fill-rule="evenodd"
                                                d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"
                                                clip-rule="evenodd"
                                            />
                                        </svg>
                                        GitHub
                                    </a>
                                )}
                                {project.links.live && (
                                    <a
                                        href={project.links.live}
                                        target="_blank"
                                        rel="noopener noreferrer"
                                        class="inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors"
                                    >
                                        <svg
                                            class="w-5 h-5"
                                            fill="none"
                                            stroke="currentColor"
                                            viewBox="0 0 24 24"
                                        >
                                            <path
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                stroke-width="2"
                                                d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                                            />
                                        </svg>
                                        Ver Demo
                                    </a>
                                )}
                            </footer>
                        </div>
                    </article>
                ))}
            </div>
        </section>

        <!-- Proyectos Backend -->
        <section>
            <h2 class="text-2xl font-bold text-gray-900 dark:text-white mb-8 text-center">
                Proyectos Backend / APIs
            </h2>
            
            <div class="grid gap-12">
                { allBackendProjects.map((project, index) => (
                    <article 
                        class={`relative group 
                            ${index % 2 === 0 ? 'lg:flex-row' : 'lg:flex-row-reverse'}
                            flex flex-col lg:flex-row gap-8 
                            p-6 rounded-2xl
                            bg-white dark:bg-gray-800/50 
                            shadow-lg hover:shadow-xl
                            transform transition duration-300 hover:-translate-y-1`}
                        data-aos={index % 2 === 0 ? "fade-right" : "fade-left"}
                    >
                        {project.images && project.images.length > 0 && (
                            <figure class="lg:w-1/2 relative group">
                                <div class="relative aspect-video rounded-lg overflow-hidden">
                                    {project.images.map((image, imgIndex) => (
                                        <div 
                                            class={`absolute inset-0 transition-opacity duration-500 ease-in-out
                                                ${imgIndex === 0 ? 'opacity-100' : 'opacity-0 group-hover:opacity-100'}`}
                                        >
                                            <img
                                                src={image.src}
                                                alt={image.alt}
                                                class="w-full h-full object-cover"
                                            />
                                        </div>
                                    ))}
                                </div>
                            </figure>
                        )}

                        <div class={`${project.images && project.images.length > 0 ? 'lg:w-1/2' : 'w-full'} flex flex-col justify-center`}>
                            <header class="space-y-4">
                                <h3 class="text-2xl font-bold text-gray-900 dark:text-white">
                                    {project.title}
                                    {project.featured && (
                                        <span class="ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200">
                                            Destacado
                                        </span>
                                    )}
                                </h3>
                            </header>

                            <p class="text-gray-600 dark:text-gray-300">
                                {project.description}
                            </p>

                            <ul class="flex flex-wrap gap-2">
                                {project.technologies.map(tech => (
                                    <li class="px-3 py-1 text-sm rounded-full bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300">
                                        {tech}
                                    </li>
                                ))}
                            </ul>

                            <footer class="flex gap-4 pt-4">
                                {project.links.github && (
                                    <a
                                        href={project.links.github}
                                        target="_blank"
                                        rel="noopener noreferrer"
                                        class="inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-gray-900 dark:bg-gray-700 text-white hover:bg-gray-800 dark:hover:bg-gray-600 transition-colors"
                                    >
                                        <svg
                                            class="w-5 h-5"
                                            fill="currentColor"
                                            viewBox="0 0 24 24"
                                            aria-hidden="true"
                                        >
                                            <path
                                                fill-rule="evenodd"
                                                d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"
                                                clip-rule="evenodd"
                                            />
                                        </svg>
                                        GitHub
                                    </a>
                                )}
                                {project.links.live && (
                                    <a
                                        href={project.links.live}
                                        target="_blank"
                                        rel="noopener noreferrer"
                                        class="inline-flex items-center gap-2 px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition-colors"
                                    >
                                        <svg
                                            class="w-5 h-5"
                                            fill="none"
                                            stroke="currentColor"
                                            viewBox="0 0 24 24"
                                        >
                                            <path
                                                stroke-linecap="round"
                                                stroke-linejoin="round"
                                                stroke-width="2"
                                                d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"
                                            />
                                        </svg>
                                        Ver Demo
                                    </a>
                                )}
                            </footer>
                        </div>
                    </article>
                ))}
            </div>
        </section>
    </main>
</Layout>
